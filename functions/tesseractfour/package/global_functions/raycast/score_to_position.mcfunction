# Adapted from SirBenet's raycast functions
#  When called, host will be moved ~(T4_ray_stpx*16, T4_ray_stpy*16, T4_ray_stpz*16)

# Copy into temporary scores so we don't destroy original ones
scoreboard players operation @s T4_ray_stpxt = @s T4_ray_stpx
scoreboard players operation @s T4_ray_stpyt = @s T4_ray_stpy
scoreboard players operation @s T4_ray_stpzt = @s T4_ray_stpz

tp @s[score_T4_ray_stpxt=-1] ~-2048 ~ ~
scoreboard players add @s[score_T4_ray_stpxt=-1] T4_ray_stpxt 32768
tp @s[score_T4_ray_stpxt_min=16384] ~1024 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=16384] T4_ray_stpxt 16384
tp @s[score_T4_ray_stpxt_min=8192] ~512 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=8192] T4_ray_stpxt 8192
tp @s[score_T4_ray_stpxt_min=4096] ~256 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=4096] T4_ray_stpxt 4096
tp @s[score_T4_ray_stpxt_min=2048] ~128 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=2048] T4_ray_stpxt 2048
tp @s[score_T4_ray_stpxt_min=1024] ~64 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=1024] T4_ray_stpxt 1024
tp @s[score_T4_ray_stpxt_min=512] ~32 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=512] T4_ray_stpxt 512
tp @s[score_T4_ray_stpxt_min=256] ~16 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=256] T4_ray_stpxt 256
tp @s[score_T4_ray_stpxt_min=128] ~8 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=128] T4_ray_stpxt 128
tp @s[score_T4_ray_stpxt_min=64] ~4 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=64] T4_ray_stpxt 64
tp @s[score_T4_ray_stpxt_min=32] ~2 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=32] T4_ray_stpxt 32
tp @s[score_T4_ray_stpxt_min=16] ~1 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=16] T4_ray_stpxt 16
tp @s[score_T4_ray_stpxt_min=8] ~0.5 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=8] T4_ray_stpxt 8
tp @s[score_T4_ray_stpxt_min=4] ~0.25 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=4] T4_ray_stpxt 4
tp @s[score_T4_ray_stpxt_min=2] ~0.125 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=2] T4_ray_stpxt 2
tp @s[score_T4_ray_stpxt_min=1] ~0.0625 ~ ~
scoreboard players remove @s[score_T4_ray_stpxt_min=1] T4_ray_stpxt 1

tp @s[score_T4_ray_stpzt=-1] ~ ~ ~-2048
scoreboard players add @s[score_T4_ray_stpzt=-1] T4_ray_stpzt 32768
tp @s[score_T4_ray_stpzt_min=16384] ~ ~ ~1024
scoreboard players remove @s[score_T4_ray_stpzt_min=16384] T4_ray_stpzt 16384
tp @s[score_T4_ray_stpzt_min=8192] ~ ~ ~512
scoreboard players remove @s[score_T4_ray_stpzt_min=8192] T4_ray_stpzt 8192
tp @s[score_T4_ray_stpzt_min=4096] ~ ~ ~256
scoreboard players remove @s[score_T4_ray_stpzt_min=4096] T4_ray_stpzt 4096
tp @s[score_T4_ray_stpzt_min=2048] ~ ~ ~128
scoreboard players remove @s[score_T4_ray_stpzt_min=2048] T4_ray_stpzt 2048
tp @s[score_T4_ray_stpzt_min=1024] ~ ~ ~64
scoreboard players remove @s[score_T4_ray_stpzt_min=1024] T4_ray_stpzt 1024
tp @s[score_T4_ray_stpzt_min=512] ~ ~ ~32
scoreboard players remove @s[score_T4_ray_stpzt_min=512] T4_ray_stpzt 512
tp @s[score_T4_ray_stpzt_min=256] ~ ~ ~16
scoreboard players remove @s[score_T4_ray_stpzt_min=256] T4_ray_stpzt 256
tp @s[score_T4_ray_stpzt_min=128] ~ ~ ~8
scoreboard players remove @s[score_T4_ray_stpzt_min=128] T4_ray_stpzt 128
tp @s[score_T4_ray_stpzt_min=64] ~ ~ ~4
scoreboard players remove @s[score_T4_ray_stpzt_min=64] T4_ray_stpzt 64
tp @s[score_T4_ray_stpzt_min=32] ~ ~ ~2
scoreboard players remove @s[score_T4_ray_stpzt_min=32] T4_ray_stpzt 32
tp @s[score_T4_ray_stpzt_min=16] ~ ~ ~1
scoreboard players remove @s[score_T4_ray_stpzt_min=16] T4_ray_stpzt 16
tp @s[score_T4_ray_stpzt_min=8] ~ ~ ~0.5
scoreboard players remove @s[score_T4_ray_stpzt_min=8] T4_ray_stpzt 8
tp @s[score_T4_ray_stpzt_min=4] ~ ~ ~0.25
scoreboard players remove @s[score_T4_ray_stpzt_min=4] T4_ray_stpzt 4
tp @s[score_T4_ray_stpzt_min=2] ~ ~ ~0.125
scoreboard players remove @s[score_T4_ray_stpzt_min=2] T4_ray_stpzt 2
tp @s[score_T4_ray_stpzt_min=1] ~ ~ ~0.0625
scoreboard players remove @s[score_T4_ray_stpzt_min=1] T4_ray_stpzt 1

tp @s[score_T4_ray_stpyt=-1] ~ ~-2048 ~
scoreboard players add @s[score_T4_ray_stpyt=-1] T4_ray_stpyt 32768
tp @s[score_T4_ray_stpyt_min=16384] ~ ~1024 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=16384] T4_ray_stpyt 16384
tp @s[score_T4_ray_stpyt_min=8192] ~ ~512 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=8192] T4_ray_stpyt 8192
tp @s[score_T4_ray_stpyt_min=4096] ~ ~256 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=4096] T4_ray_stpyt 4096
tp @s[score_T4_ray_stpyt_min=2048] ~ ~128 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=2048] T4_ray_stpyt 2048
tp @s[score_T4_ray_stpyt_min=1024] ~ ~64 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=1024] T4_ray_stpyt 1024
tp @s[score_T4_ray_stpyt_min=512] ~ ~32 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=512] T4_ray_stpyt 512
tp @s[score_T4_ray_stpyt_min=256] ~ ~16 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=256] T4_ray_stpyt 256
tp @s[score_T4_ray_stpyt_min=128] ~ ~8 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=128] T4_ray_stpyt 128
tp @s[score_T4_ray_stpyt_min=64] ~ ~4 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=64] T4_ray_stpyt 64
tp @s[score_T4_ray_stpyt_min=32] ~ ~2 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=32] T4_ray_stpyt 32
tp @s[score_T4_ray_stpyt_min=16] ~ ~1 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=16] T4_ray_stpyt 16
tp @s[score_T4_ray_stpyt_min=8] ~ ~0.5 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=8] T4_ray_stpyt 8
tp @s[score_T4_ray_stpyt_min=4] ~ ~0.25 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=4] T4_ray_stpyt 4
tp @s[score_T4_ray_stpyt_min=2] ~ ~0.125 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=2] T4_ray_stpyt 2
tp @s[score_T4_ray_stpyt_min=1] ~ ~0.0625 ~
scoreboard players remove @s[score_T4_ray_stpyt_min=1] T4_ray_stpyt 1
