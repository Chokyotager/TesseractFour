# (C) TesseractFour by ChocoParrot, 2017
# All rights reserved
# Cave-In by ChocoParrot

summon leash_knot ~ ~6 ~ {Tags:["T4_CI_lk"]}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-5 ~ detect ~ ~ ~ stone -1 execute @s ~ ~-5 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-4 ~ detect ~ ~ ~ stone -1 execute @s ~ ~-4 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-3 ~ detect ~ ~ ~ stone -1 execute @s ~ ~-3 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-2 ~ detect ~ ~ ~ stone -1 execute @s ~ ~-2 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-1 ~ detect ~ ~ ~ stone -1 execute @s ~ ~-1 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~0 ~ detect ~ ~ ~ stone -1 execute @s ~ ~0 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~1 ~ detect ~ ~ ~ stone -1 execute @s ~ ~1 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}

execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-5 ~ detect ~ ~ ~ dirt 0 execute @s ~ ~-5 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-4 ~ detect ~ ~ ~ dirt 0 execute @s ~ ~-4 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-3 ~ detect ~ ~ ~ dirt 0 execute @s ~ ~-3 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-2 ~ detect ~ ~ ~ dirt 0 execute @s ~ ~-2 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-1 ~ detect ~ ~ ~ dirt 0 execute @s ~ ~-1 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~0 ~ detect ~ ~ ~ dirt 0 execute @s ~ ~0 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~1 ~ detect ~ ~ ~ dirt 0 execute @s ~ ~1 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}

execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-5 ~ detect ~ ~ ~ cobblestone 0 execute @s ~ ~-5 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-4 ~ detect ~ ~ ~ cobblestone 0 execute @s ~ ~-4 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-3 ~ detect ~ ~ ~ cobblestone 0 execute @s ~ ~-3 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-2 ~ detect ~ ~ ~ cobblestone 0 execute @s ~ ~-2 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~-1 ~ detect ~ ~ ~ cobblestone 0 execute @s ~ ~-1 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~0 ~ detect ~ ~ ~ cobblestone 0 execute @s ~ ~0 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}
execute @e[tag=T4_CI_lk,type=leash_knot] ~ ~1 ~ detect ~ ~ ~ cobblestone 0 execute @s ~ ~1 ~ detect ~ ~-1 ~ air -1 summon armor_stand ~ ~ ~ {Tags:["T4_CI_initiate"],Invisible:1b,NoGravity:1b,Marker:1b}

execute @e[tag=T4_CI_dmine,type=armor_stand,score_T4_CI_trigtime=0,score_T4_CI_trigtime_min=0] ~ ~ ~ execute @e[type=armor_stand,tag=T4_CI_initiate,r=10,c=1] ~ ~ ~ playsound minecraft:item.totem.use master @a ~ ~ ~ 2.3 0

kill @e[tag=T4_CI_lk,type=leash_knot]

execute @e[type=armor_stand,tag=T4_CI_initiate] ~ ~1 ~ detect ~ ~ ~ stone 0 summon falling_block ~ ~ ~ {DropItem:0b,TileID:1,Time:0s,Tags:["T4_CI_fall","T4_CI_isFalling","T4_CI_sound"],FallHurtAmount:8.0f,FallHurtMax:20,HurtEntities:1b}
execute @e[type=armor_stand,tag=T4_CI_initiate] ~ ~ ~ detect ~ ~ ~ stone 0 summon falling_block ~ ~ ~ {DropItem:0b,TileID:1,Time:0s,Tags:["T4_CI_fall","T4_CI_isFalling","T4_CI_sound"],FallHurtAmount:8.0f,FallHurtMax:20,HurtEntities:1b}

execute @e[type=armor_stand,tag=T4_CI_initiate] ~ ~1 ~ detect ~ ~ ~ stone 1 summon falling_block ~ ~ ~ {DropItem:0b,TileID:1,Time:0s,Tags:["T4_CI_fall","T4_CI_isFalling","T4_CI_sound"],FallHurtAmount:14.0f,FallHurtMax:40,HurtEntities:1b,Data:1}
execute @e[type=armor_stand,tag=T4_CI_initiate] ~ ~ ~ detect ~ ~ ~ stone 1 summon falling_block ~ ~ ~ {DropItem:0b,TileID:1,Time:0s,Tags:["T4_CI_fall","T4_CI_isFalling","T4_CI_sound"],FallHurtAmount:14.0f,FallHurtMax:40,HurtEntities:1b,Data:1}

execute @e[type=armor_stand,tag=T4_CI_initiate] ~ ~1 ~ detect ~ ~ ~ stone 3 summon falling_block ~ ~ ~ {DropItem:0b,TileID:1,Time:0s,Tags:["T4_CI_fall","T4_CI_isFalling","T4_CI_sound"],FallHurtAmount:17.0f,FallHurtMax:50,HurtEntities:1b,Data:3}
execute @e[type=armor_stand,tag=T4_CI_initiate] ~ ~ ~ detect ~ ~ ~ stone 3 summon falling_block ~ ~ ~ {DropItem:0b,TileID:1,Time:0s,Tags:["T4_CI_fall","T4_CI_isFalling","T4_CI_sound"],FallHurtAmount:17.0f,FallHurtMax:50,HurtEntities:1b,Data:3}

execute @e[type=armor_stand,tag=T4_CI_initiate] ~ ~1 ~ detect ~ ~ ~ stone 5 summon falling_block ~ ~ ~ {DropItem:0b,TileID:1,Time:0s,Tags:["T4_CI_fall","T4_CI_isFalling","T4_CI_sound"],FallHurtAmount:11.0f,FallHurtMax:30,HurtEntities:1b,Data:5}
execute @e[type=armor_stand,tag=T4_CI_initiate] ~ ~ ~ detect ~ ~ ~ stone 5 summon falling_block ~ ~ ~ {DropItem:0b,TileID:1,Time:0s,Tags:["T4_CI_fall","T4_CI_isFalling","T4_CI_sound"],FallHurtAmount:11.0f,FallHurtMax:30,HurtEntities:1b,Data:5}

execute @e[type=armor_stand,tag=T4_CI_initiate] ~ ~1 ~ detect ~ ~ ~ dirt 0 summon falling_block ~ ~ ~ {DropItem:0b,TileID:3,Time:0s,Tags:["T4_CI_fall","T4_CI_isFalling","T4_CI_sound"],FallHurtAmount:6.0f,FallHurtMax:18,HurtEntities:1b}
execute @e[type=armor_stand,tag=T4_CI_initiate] ~ ~ ~ detect ~ ~ ~ dirt 0 summon falling_block ~ ~ ~ {DropItem:0b,TileID:3,Time:0s,Tags:["T4_CI_fall","T4_CI_isFalling","T4_CI_sound"],FallHurtAmount:6.0f,FallHurtMax:18,HurtEntities:1b}

execute @e[type=armor_stand,tag=T4_CI_initiate] ~ ~1 ~ detect ~ ~ ~ cobblestone 0 summon falling_block ~ ~ ~ {DropItem:0b,TileID:4,Time:0s,Tags:["T4_CI_fall","T4_CI_isFalling","T4_CI_sound"],FallHurtAmount:6.0f,FallHurtMax:18,HurtEntities:1b}
execute @e[type=armor_stand,tag=T4_CI_initiate] ~ ~ ~ detect ~ ~ ~ cobblestone 0 summon falling_block ~ ~ ~ {DropItem:0b,TileID:4,Time:0s,Tags:["T4_CI_fall","T4_CI_isFalling","T4_CI_sound"],FallHurtAmount:6.0f,FallHurtMax:18,HurtEntities:1b}

execute @e[type=armor_stand,tag=T4_CI_initiate] ~ ~ ~ scoreboard players add @e[type=falling_block,tag=T4_CI_fall,r=2] T4_CI_falltime 1
kill @e[type=armor_stand,tag=T4_CI_initiate]
